use crate::Document;
use crate::builder::builder::*;
use crate::builder::prism::BuildContext;
use crate::builder::prism::build_node_variant::*;
use crate::builder::prism::helper::build_blank_lines::*;
use crate::builder::prism::helper::build_comments::*;
use ruby_prism::*;
use std::io::Read;

#[rustfmt::skip]
pub fn build_node(node: &Node<'_>, context: &mut BuildContext) -> Document{
    let leading_comments = leading_comments_n(&node, context);
    let leading_blank_lines = leading_blank_lines(&node, context);
    let trailing_comments = trailing_comments_n(&node, context);
    let node = match node {
        Node::AliasGlobalVariableNode           { .. } => alias_global_variable_node::build_alias_global_variable_node                      (&node.as_alias_global_variable_node().unwrap()           , context),
        Node::AliasMethodNode                   { .. } => alias_method_node::build_alias_method_node                                        (&node.as_alias_method_node().unwrap()                    , context),
        Node::AlternationPatternNode            { .. } => alternation_pattern_node::build_alternation_pattern_node                          (&node.as_alternation_pattern_node().unwrap()             , context),
        Node::AndNode                           { .. } => and_node::build_and_node                                                          (&node.as_and_node().unwrap()                             , context),
        Node::ArgumentsNode                     { .. } => arguments_node::build_arguments_node                                              (&node.as_arguments_node().unwrap()                       , context),
        Node::ArrayNode                         { .. } => array_node::build_array_node                                                      (&node.as_array_node().unwrap()                           , context),
        Node::ArrayPatternNode                  { .. } => array_pattern_node::build_array_pattern_node                                      (&node.as_array_pattern_node().unwrap()                   , context),
        Node::AssocNode                         { .. } => assoc_node::build_assoc_node                                                      (&node.as_assoc_node().unwrap()                           , context),
        Node::AssocSplatNode                    { .. } => assoc_splat_node::build_assoc_splat_node                                          (&node.as_assoc_splat_node().unwrap()                     , context),
        Node::BackReferenceReadNode             { .. } => back_reference_read_node::build_back_reference_read_node                          (&node.as_back_reference_read_node().unwrap()             , context),
        Node::BeginNode                         { .. } => begin_node::build_begin_node                                                      (&node.as_begin_node().unwrap()                           , context),
        Node::BlockArgumentNode                 { .. } => block_argument_node::build_block_argument_node                                    (&node.as_block_argument_node().unwrap()                  , context),
        Node::BlockLocalVariableNode            { .. } => block_local_variable_node::build_block_local_variable_node                        (&node.as_block_local_variable_node().unwrap()            , context),
        Node::BlockNode                         { .. } => block_node::build_block_node                                                      (&node.as_block_node().unwrap()                           , context),
        Node::BlockParameterNode                { .. } => block_parameter_node::build_block_parameter_node                                  (&node.as_block_parameter_node().unwrap()                 , context),
        Node::BlockParametersNode               { .. } => block_parameters_node::build_block_parameters_node                                (&node.as_block_parameters_node().unwrap()                , context),
        Node::BreakNode                         { .. } => break_node::build_break_node                                                      (&node.as_break_node().unwrap()                           , context),
        Node::CallAndWriteNode                  { .. } => call_and_write_node::build_call_and_write_node                                    (&node.as_call_and_write_node().unwrap()                  , context),
        Node::CallNode                          { .. } => call_node::build_call_node                                                        (&node.as_call_node().unwrap()                            , context),
        Node::CallOperatorWriteNode             { .. } => call_operator_write_node::build_call_operator_write_node                          (&node.as_call_operator_write_node().unwrap()             , context),
        Node::CallOrWriteNode                   { .. } => call_or_write_node::build_call_or_write_node                                      (&node.as_call_or_write_node().unwrap()                   , context),
        Node::CallTargetNode                    { .. } => call_target_node::build_call_target_node                                          (&node.as_call_target_node().unwrap()                     , context),
        Node::CapturePatternNode                { .. } => capture_pattern_node::build_capture_pattern_node                                  (&node.as_capture_pattern_node().unwrap()                 , context),
        Node::CaseMatchNode                     { .. } => case_match_node::build_case_match_node                                            (&node.as_case_match_node().unwrap()                      , context),
        Node::CaseNode                          { .. } => case_node::build_case_node                                                        (&node.as_case_node().unwrap()                            , context),
        Node::ClassNode                         { .. } => class_node::build_class_node                                                      (&node.as_class_node().unwrap()                           , context),
        Node::ClassVariableAndWriteNode         { .. } => class_variable_and_write_node::build_class_variable_and_write_node                (&node.as_class_variable_and_write_node().unwrap()        , context),
        Node::ClassVariableOperatorWriteNode    { .. } => class_variable_operator_write_node::build_class_variable_operator_write_node      (&node.as_class_variable_operator_write_node().unwrap()   , context),
        Node::ClassVariableOrWriteNode          { .. } => class_variable_or_write_node::build_class_variable_or_write_node                  (&node.as_class_variable_or_write_node().unwrap()         , context),
        Node::ClassVariableReadNode             { .. } => class_variable_read_node::build_class_variable_read_node                          (&node.as_class_variable_read_node().unwrap()             , context),
        Node::ClassVariableTargetNode           { .. } => class_variable_target_node::build_class_variable_target_node                      (&node.as_class_variable_target_node().unwrap()           , context),
        Node::ClassVariableWriteNode            { .. } => class_variable_write_node::build_class_variable_write_node                        (&node.as_class_variable_write_node().unwrap()            , context),
        Node::ConstantAndWriteNode              { .. } => constant_and_write_node::build_constant_and_write_node                            (&node.as_constant_and_write_node().unwrap()              , context),
        Node::ConstantOperatorWriteNode         { .. } => constant_operator_write_node::build_constant_operator_write_node                  (&node.as_constant_operator_write_node().unwrap()         , context),
        Node::ConstantOrWriteNode               { .. } => constant_or_write_node::build_constant_or_write_node                              (&node.as_constant_or_write_node().unwrap()               , context),
        Node::ConstantPathAndWriteNode          { .. } => constant_path_and_write_node::build_constant_path_and_write_node                  (&node.as_constant_path_and_write_node().unwrap()         , context),
        Node::ConstantPathNode                  { .. } => constant_path_node::build_constant_path_node                                      (&node.as_constant_path_node().unwrap()                   , context),
        Node::ConstantPathOperatorWriteNode     { .. } => constant_path_operator_write_node::build_constant_path_operator_write_node        (&node.as_constant_path_operator_write_node().unwrap()    , context),
        Node::ConstantPathOrWriteNode           { .. } => constant_path_or_write_node::build_constant_path_or_write_node                    (&node.as_constant_path_or_write_node().unwrap()          , context),
        Node::ConstantPathTargetNode            { .. } => constant_path_target_node::build_constant_path_target_node                        (&node.as_constant_path_target_node().unwrap()            , context),
        Node::ConstantPathWriteNode             { .. } => constant_path_write_node::build_constant_path_write_node                          (&node.as_constant_path_write_node().unwrap()             , context),
        Node::ConstantReadNode                  { .. } => constant_read_node::build_constant_read_node                                      (&node.as_constant_read_node().unwrap()                   , context),
        Node::ConstantTargetNode                { .. } => constant_target_node::build_constant_target_node                                  (&node.as_constant_target_node().unwrap()                 , context),
        Node::ConstantWriteNode                 { .. } => constant_write_node::build_constant_write_node                                    (&node.as_constant_write_node().unwrap()                  , context),
        Node::DefNode                           { .. } => def_node::build_def_node                                                          (&node.as_def_node().unwrap()                             , context),
        Node::DefinedNode                       { .. } => defined_node::build_defined_node                                                  (&node.as_defined_node().unwrap()                         , context),
        Node::ElseNode                          { .. } => else_node::build_else_node                                                        (&node.as_else_node().unwrap()                            , context),
        Node::EmbeddedStatementsNode            { .. } => embedded_statements_node::build_embedded_statements_node                          (&node.as_embedded_statements_node().unwrap()             , context),
        Node::EmbeddedVariableNode              { .. } => embedded_variable_node::build_embedded_variable_node                              (&node.as_embedded_variable_node().unwrap()               , context),
        Node::EnsureNode                        { .. } => ensure_node::build_ensure_node                                                    (&node.as_ensure_node().unwrap()                          , context),
        Node::FalseNode                         { .. } => false_node::build_false_node                                                      (&node.as_false_node().unwrap()                           , context),
        Node::FindPatternNode                   { .. } => find_pattern_node::build_find_pattern_node                                        (&node.as_find_pattern_node().unwrap()                    , context),
        Node::FlipFlopNode                      { .. } => flip_flop_node::build_flip_flop_node                                              (&node.as_flip_flop_node().unwrap()                       , context),
        Node::FloatNode                         { .. } => float_node::build_float_node                                                      (&node.as_float_node().unwrap()                           , context),
        Node::ForNode                           { .. } => for_node::build_for_node                                                          (&node.as_for_node().unwrap()                             , context),
        Node::ForwardingArgumentsNode           { .. } => forwarding_arguments_node::build_forwarding_arguments_node                        (&node.as_forwarding_arguments_node().unwrap()            , context),
        Node::ForwardingParameterNode           { .. } => forwarding_parameter_node::build_forwarding_parameter_node                        (&node.as_forwarding_parameter_node().unwrap()            , context),
        Node::ForwardingSuperNode               { .. } => forwarding_super_node::build_forwarding_super_node                                (&node.as_forwarding_super_node().unwrap()                , context),
        Node::GlobalVariableAndWriteNode        { .. } => global_variable_and_write_node::build_global_variable_and_write_node              (&node.as_global_variable_and_write_node().unwrap()       , context),
        Node::GlobalVariableOperatorWriteNode   { .. } => global_variable_operator_write_node::build_global_variable_operator_write_node    (&node.as_global_variable_operator_write_node().unwrap()  , context),
        Node::GlobalVariableOrWriteNode         { .. } => global_variable_or_write_node::build_global_variable_or_write_node                (&node.as_global_variable_or_write_node().unwrap()        , context),
        Node::GlobalVariableReadNode            { .. } => global_variable_read_node::build_global_variable_read_node                        (&node.as_global_variable_read_node().unwrap()            , context),
        Node::GlobalVariableTargetNode          { .. } => global_variable_target_node::build_global_variable_target_node                    (&node.as_global_variable_target_node().unwrap()          , context),
        Node::GlobalVariableWriteNode           { .. } => global_variable_write_node::build_global_variable_write_node                      (&node.as_global_variable_write_node().unwrap()           , context),
        Node::HashNode                          { .. } => hash_node::build_hash_node                                                        (&node.as_hash_node().unwrap()                            , context),
        Node::HashPatternNode                   { .. } => hash_pattern_node::build_hash_pattern_node                                        (&node.as_hash_pattern_node().unwrap()                    , context),
        Node::IfNode                            { .. } => if_node::build_if_node                                                            (&node.as_if_node().unwrap()                              , context),
        Node::ImaginaryNode                     { .. } => imaginary_node::build_imaginary_node                                              (&node.as_imaginary_node().unwrap()                       , context),
        Node::ImplicitNode                      { .. } => implicit_node::build_implicit_node                                                (&node.as_implicit_node().unwrap()                        , context),
        Node::ImplicitRestNode                  { .. } => implicit_rest_node::build_implicit_rest_node                                      (&node.as_implicit_rest_node().unwrap()                   , context),
        Node::InNode                            { .. } => in_node::build_in_node                                                            (&node.as_in_node().unwrap()                              , context),
        Node::IndexAndWriteNode                 { .. } => index_and_write_node::build_index_and_write_node                                  (&node.as_index_and_write_node().unwrap()                 , context),
        Node::IndexOperatorWriteNode            { .. } => index_operator_write_node::build_index_operator_write_node                        (&node.as_index_operator_write_node().unwrap()            , context),
        Node::IndexOrWriteNode                  { .. } => index_or_write_node::build_index_or_write_node                                    (&node.as_index_or_write_node().unwrap()                  , context),
        Node::IndexTargetNode                   { .. } => index_target_node::build_index_target_node                                        (&node.as_index_target_node().unwrap()                    , context),
        Node::InstanceVariableAndWriteNode      { .. } => instance_variable_and_write_node::build_instance_variable_and_write_node          (&node.as_instance_variable_and_write_node().unwrap()     , context),
        Node::InstanceVariableOperatorWriteNode { .. } => instance_variable_operator_write_node::build_instance_variable_operator_write_node(&node.as_instance_variable_operator_write_node().unwrap(), context),
        Node::InstanceVariableOrWriteNode       { .. } => instance_variable_or_write_node::build_instance_variable_or_write_node            (&node.as_instance_variable_or_write_node().unwrap()      , context),
        Node::InstanceVariableReadNode          { .. } => instance_variable_read_node::build_instance_variable_read_node                    (&node.as_instance_variable_read_node().unwrap()          , context),
        Node::InstanceVariableTargetNode        { .. } => instance_variable_target_node::build_instance_variable_target_node                (&node.as_instance_variable_target_node().unwrap()        , context),
        Node::InstanceVariableWriteNode         { .. } => instance_variable_write_node::build_instance_variable_write_node                  (&node.as_instance_variable_write_node().unwrap()         , context),
        Node::IntegerNode                       { .. } => integer_node::build_integer_node                                                  (&node.as_integer_node().unwrap()                         , context),
        Node::InterpolatedMatchLastLineNode     { .. } => interpolated_match_last_line_node::build_interpolated_match_last_line_node        (&node.as_interpolated_match_last_line_node().unwrap()    , context),
        Node::InterpolatedRegularExpressionNode { .. } => interpolated_regular_expression_node::build_interpolated_regular_expression_node  (&node.as_interpolated_regular_expression_node().unwrap() , context),
        Node::InterpolatedStringNode            { .. } => interpolated_string_node::build_interpolated_string_node                          (&node.as_interpolated_string_node().unwrap()             , context),
        Node::InterpolatedSymbolNode            { .. } => interpolated_symbol_node::build_interpolated_symbol_node                          (&node.as_interpolated_symbol_node().unwrap()             , context),
        Node::InterpolatedXStringNode           { .. } => interpolated_x_string_node::build_interpolated_x_string_node                      (&node.as_interpolated_x_string_node().unwrap()           , context),
        Node::ItLocalVariableReadNode           { .. } => it_local_variable_read_node::build_it_local_variable_read_node                    (&node.as_it_local_variable_read_node().unwrap()          , context),
        Node::ItParametersNode                  { .. } => it_parameters_node::build_it_parameters_node                                      (&node.as_it_parameters_node().unwrap()                   , context),
        Node::KeywordHashNode                   { .. } => keyword_hash_node::build_keyword_hash_node                                        (&node.as_keyword_hash_node().unwrap()                    , context),
        Node::KeywordRestParameterNode          { .. } => keyword_rest_parameter_node::build_keyword_rest_parameter_node                    (&node.as_keyword_rest_parameter_node().unwrap()          , context),
        Node::LambdaNode                        { .. } => lambda_node::build_lambda_node                                                    (&node.as_lambda_node().unwrap()                          , context),
        Node::LocalVariableAndWriteNode         { .. } => local_variable_and_write_node::build_local_variable_and_write_node                (&node.as_local_variable_and_write_node().unwrap()        , context),
        Node::LocalVariableOperatorWriteNode    { .. } => local_variable_operator_write_node::build_local_variable_operator_write_node      (&node.as_local_variable_operator_write_node().unwrap()   , context),
        Node::LocalVariableOrWriteNode          { .. } => local_variable_or_write_node::build_local_variable_or_write_node                  (&node.as_local_variable_or_write_node().unwrap()         , context),
        Node::LocalVariableReadNode             { .. } => local_variable_read_node::build_local_variable_read_node                          (&node.as_local_variable_read_node().unwrap()             , context),
        Node::LocalVariableTargetNode           { .. } => local_variable_target_node::build_local_variable_target_node                      (&node.as_local_variable_target_node().unwrap()           , context),
        Node::LocalVariableWriteNode            { .. } => local_variable_write_node::build_local_variable_write_node                        (&node.as_local_variable_write_node().unwrap()            , context),
        Node::MatchLastLineNode                 { .. } => match_last_line_node::build_match_last_line_node                                  (&node.as_match_last_line_node().unwrap()                 , context),
        Node::MatchPredicateNode                { .. } => match_predicate_node::build_match_predicate_node                                  (&node.as_match_predicate_node().unwrap()                 , context),
        Node::MatchRequiredNode                 { .. } => match_required_node::build_match_required_node                                    (&node.as_match_required_node().unwrap()                  , context),
        Node::MatchWriteNode                    { .. } => match_write_node::build_match_write_node                                          (&node.as_match_write_node().unwrap()                     , context),
        Node::MissingNode                       { .. } => missing_node::build_missing_node                                                  (&node.as_missing_node().unwrap()                         , context),
        Node::ModuleNode                        { .. } => module_node::build_module_node                                                    (&node.as_module_node().unwrap()                          , context),
        Node::MultiTargetNode                   { .. } => multi_target_node::build_multi_target_node                                        (&node.as_multi_target_node().unwrap()                    , context),
        Node::MultiWriteNode                    { .. } => multi_write_node::build_multi_write_node                                          (&node.as_multi_write_node().unwrap()                     , context),
        Node::NextNode                          { .. } => next_node::build_next_node                                                        (&node.as_next_node().unwrap()                            , context),
        Node::NilNode                           { .. } => nil_node::build_nil_node                                                          (&node.as_nil_node().unwrap()                             , context),
        Node::NoKeywordsParameterNode           { .. } => no_keywords_parameter_node::build_no_keywords_parameter_node                      (&node.as_no_keywords_parameter_node().unwrap()           , context),
        Node::NumberedParametersNode            { .. } => numbered_parameters_node::build_numbered_parameters_node                          (&node.as_numbered_parameters_node().unwrap()             , context),
        Node::NumberedReferenceReadNode         { .. } => numbered_reference_read_node::build_numbered_reference_read_node                  (&node.as_numbered_reference_read_node().unwrap()         , context),
        Node::OptionalKeywordParameterNode      { .. } => optional_keyword_parameter_node::build_optional_keyword_parameter_node            (&node.as_optional_keyword_parameter_node().unwrap()      , context),
        Node::OptionalParameterNode             { .. } => optional_parameter_node::build_optional_parameter_node                            (&node.as_optional_parameter_node().unwrap()              , context),
        Node::OrNode                            { .. } => or_node::build_or_node                                                            (&node.as_or_node().unwrap()                              , context),
        Node::ParametersNode                    { .. } => parameters_node::build_parameters_node                                            (&node.as_parameters_node().unwrap()                      , context),
        Node::ParenthesesNode                   { .. } => parentheses_node::build_parentheses_node                                          (&node.as_parentheses_node().unwrap()                     , context),
        Node::PinnedExpressionNode              { .. } => pinned_expression_node::build_pinned_expression_node                              (&node.as_pinned_expression_node().unwrap()               , context),
        Node::PinnedVariableNode                { .. } => pinned_variable_node::build_pinned_variable_node                                  (&node.as_pinned_variable_node().unwrap()                 , context),
        Node::PostExecutionNode                 { .. } => post_execution_node::build_post_execution_node                                    (&node.as_post_execution_node().unwrap()                  , context),
        Node::PreExecutionNode                  { .. } => pre_execution_node::build_pre_execution_node                                      (&node.as_pre_execution_node().unwrap()                   , context),
        Node::ProgramNode                       { .. } => program_node::build_program_node                                                  (&node.as_program_node().unwrap()                         , context),
        Node::RangeNode                         { .. } => range_node::build_range_node                                                      (&node.as_range_node().unwrap()                           , context),
        Node::RationalNode                      { .. } => rational_node::build_rational_node                                                (&node.as_rational_node().unwrap()                        , context),
        Node::RedoNode                          { .. } => redo_node::build_redo_node                                                        (&node.as_redo_node().unwrap()                            , context),
        Node::RegularExpressionNode             { .. } => regular_expression_node::build_regular_expression_node                            (&node.as_regular_expression_node().unwrap()              , context),
        Node::RequiredKeywordParameterNode      { .. } => required_keyword_parameter_node::build_required_keyword_parameter_node            (&node.as_required_keyword_parameter_node().unwrap()      , context),
        Node::RequiredParameterNode             { .. } => required_parameter_node::build_required_parameter_node                            (&node.as_required_parameter_node().unwrap()              , context),
        Node::RescueModifierNode                { .. } => rescue_modifier_node::build_rescue_modifier_node                                  (&node.as_rescue_modifier_node().unwrap()                 , context),
        Node::RescueNode                        { .. } => rescue_node::build_rescue_node                                                    (&node.as_rescue_node().unwrap()                          , context),
        Node::RestParameterNode                 { .. } => rest_parameter_node::build_rest_parameter_node                                    (&node.as_rest_parameter_node().unwrap()                  , context),
        Node::RetryNode                         { .. } => retry_node::build_retry_node                                                      (&node.as_retry_node().unwrap()                           , context),
        Node::ReturnNode                        { .. } => return_node::build_return_node                                                    (&node.as_return_node().unwrap()                          , context),
        Node::SelfNode                          { .. } => self_node::build_self_node                                                        (&node.as_self_node().unwrap()                            , context),
        Node::ShareableConstantNode             { .. } => shareable_constant_node::build_shareable_constant_node                            (&node.as_shareable_constant_node().unwrap()              , context),
        Node::SingletonClassNode                { .. } => singleton_class_node::build_singleton_class_node                                  (&node.as_singleton_class_node().unwrap()                 , context),
        Node::SourceEncodingNode                { .. } => source_encoding_node::build_source_encoding_node                                  (&node.as_source_encoding_node().unwrap()                 , context),
        Node::SourceFileNode                    { .. } => source_file_node::build_source_file_node                                          (&node.as_source_file_node().unwrap()                     , context),
        Node::SourceLineNode                    { .. } => source_line_node::build_source_line_node                                          (&node.as_source_line_node().unwrap()                     , context),
        Node::SplatNode                         { .. } => splat_node::build_splat_node                                                      (&node.as_splat_node().unwrap()                           , context),
        Node::StatementsNode                    { .. } => statements_node::build_statements_node                                            (&node.as_statements_node().unwrap()                      , context),
        Node::StringNode                        { .. } => string_node::build_string_node                                                    (&node.as_string_node().unwrap()                          , context),
        Node::SuperNode                         { .. } => super_node::build_super_node                                                      (&node.as_super_node().unwrap()                           , context),
        Node::SymbolNode                        { .. } => symbol_node::build_symbol_node                                                    (&node.as_symbol_node().unwrap()                          , context),
        Node::TrueNode                          { .. } => true_node::build_true_node                                                        (&node.as_true_node().unwrap()                            , context),
        Node::UndefNode                         { .. } => undef_node::build_undef_node                                                      (&node.as_undef_node().unwrap()                           , context),
        Node::UnlessNode                        { .. } => unless_node::build_unless_node                                                    (&node.as_unless_node().unwrap()                          , context),
        Node::UntilNode                         { .. } => until_node::build_until_node                                                      (&node.as_until_node().unwrap()                           , context),
        Node::WhenNode                          { .. } => when_node::build_when_node                                                        (&node.as_when_node().unwrap()                            , context),
        Node::WhileNode                         { .. } => while_node::build_while_node                                                      (&node.as_while_node().unwrap()                           , context),
        Node::XStringNode                       { .. } => x_string_node::build_x_string_node                                                (&node.as_x_string_node().unwrap()                        , context),
        Node::YieldNode                         { .. } => yield_node::build_yield_node                                                      (&node.as_yield_node().unwrap()                           , context),
    };
    array_opt(&[leading_comments, leading_blank_lines, Some(node), trailing_comments])
}

pub fn escape(unescaped: &[u8]) -> String {
    // TODO
    String::new()
}
pub fn build_constant_id(constant_id: &ConstantId<'_>, context: &mut BuildContext) -> Document {
    let mut buf = String::new();
    constant_id.as_slice().read_to_string(&mut buf);
    string(buf)
}
pub fn build_f64(value: &f64, context: &mut BuildContext) -> Document {
    // TODO
    Document::None
}
pub fn build_integer(integer: &Integer<'_>, context: &mut BuildContext) -> Document {
    // TODO
    Document::None
}
